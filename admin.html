<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Panel - Ganchos Blistero</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body { margin:0; background:radial-gradient(circle at 20% 20%, #1c2333, #0b0f17 48%), #0b0f17; color:#eef1f7; font-family:"Space Grotesk", system-ui, -apple-system, sans-serif; min-height:100vh; }
    .admin-shell { max-width: 1180px; margin: 32px auto 48px; padding: 0 16px; }
    .panel-card { background:rgba(18,22,32,0.9); border:1px solid rgba(255,255,255,0.06); border-radius:18px; padding:22px; box-shadow:0 20px 60px rgba(0,0,0,0.35); backdrop-filter: blur(10px); animation: fadeUp 0.4s ease; }
    .panel-card h1 { margin:0 0 8px; font-size:26px; letter-spacing:0.4px; }
    .panel-card p { margin:0 0 16px; color:#b6bed4; }
    .field-row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; margin-bottom:12px; }
    .field-row input, .field-row select { background:#0f1420; border:1px solid rgba(255,255,255,0.10); color:#eef1f7; padding:10px 12px; border-radius:12px; min-width:180px; transition: border-color 0.2s ease, box-shadow 0.2s ease; }
    .field-row input:focus, .field-row select:focus { outline:none; border-color:#ef2b2d; box-shadow:0 0 0 2px rgba(239,43,45,0.2); }
    .btn { background:linear-gradient(120deg,#ef2b2d,#ff6b6b); color:#fff; border:none; border-radius:12px; padding:10px 16px; cursor:pointer; font-weight:700; transition:transform 0.15s ease, box-shadow 0.2s ease, opacity 0.2s; }
    .btn:hover { transform:translateY(-1px); box-shadow:0 8px 20px rgba(239,43,45,0.35); }
    .btn:disabled { opacity:0.5; cursor:not-allowed; }
    .btn--ghost { background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.12); }
    .status-pill { display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:12px; font-size:12px; text-transform:uppercase; letter-spacing:0.5px; font-weight:700; }
    .status--pending { background:rgba(255,197,82,0.18); color:#f7b731; }
    .status--approved { background:rgba(76,217,100,0.18); color:#3bd16f; }
    .status--cancelled { background:rgba(255,99,99,0.18); color:#ff6b6b; }
    table { width:100%; border-collapse:collapse; margin-top:12px; }
    th, td { padding:12px; border-bottom:1px solid rgba(255,255,255,0.06); text-align:left; vertical-align:top; transition: background 0.2s ease; }
    tr:hover td { background:rgba(255,255,255,0.02); }
    th { color:#9fa6b9; font-size:12px; text-transform:uppercase; letter-spacing:0.6px; }
    .pill { background:rgba(255,255,255,0.08); padding:6px 10px; border-radius:10px; font-size:12px; }
    .notes { font-size:12px; color:#cdd2e0; }
    .header-brand { display:flex; align-items:center; gap:12px; margin-bottom:12px; animation: fadeUp 0.4s ease; }
    .header-brand img { width:56px; height:56px; object-fit:contain; border-radius:14px; background:#0c0f14; border:1px solid rgba(255,255,255,0.08); padding:6px; box-shadow:0 6px 14px rgba(0,0,0,0.25); }
    .header-brand .brand-title { font-size:22px; font-weight:700; margin:0; letter-spacing:0.4px; }
    .header-brand .brand-sub { color:#aeb3c2; margin:0; font-size:13px; }
    .product-row { display:flex; gap:14px; align-items:flex-start; padding:14px; border:1px solid rgba(255,255,255,0.05); border-radius:12px; margin-bottom:10px; background:#0c0f14; transition: border-color 0.2s ease, transform 0.15s ease; }
    .product-row:hover { border-color:rgba(239,43,45,0.35); transform:translateY(-2px); }
    .product-row__media { flex:0 0 90px; }
    .admin-thumb { width:90px; height:90px; object-fit:cover; border-radius:12px; border:1px solid rgba(255,255,255,0.08); background:#111420; }
    .admin-thumb--empty { width:90px; height:90px; display:grid; place-items:center; color:#9fa6b9; font-size:12px; }
    .product-row__info { flex:1; display:grid; gap:6px; }
    .product-row__title { font-weight:700; font-size:16px; }
    .product-row__meta { color:#9fa6b9; font-size:13px; }
    .product-row__desc { color:#cdd2e0; font-size:13px; line-height:1.4; max-height:46px; overflow:hidden; }
    .product-row__actions { display:flex; flex-direction:column; gap:8px; }
    .product-row__status { display:inline-flex; align-items:center; gap:6px; font-size:12px; font-weight:700; width:max-content; padding:6px 10px; border-radius:10px; border:1px solid rgba(255,255,255,0.08); }
    .status-pill--on { background: rgba(37,211,102,0.12); color:#7dffb6; border-color: rgba(37,211,102,0.35); }
    .status-pill--off { background: rgba(239,43,45,0.14); color:#ffc0b5; border-color: rgba(239,43,45,0.35); }
    .hidden { display:none; }
    .charts { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:12px; margin-top:16px; }
    .chart-box { background:#0c0f14; border:1px solid rgba(255,255,255,0.05); border-radius:14px; padding:12px; box-shadow:0 8px 20px rgba(0,0,0,0.18); }
    .chart-box h3 { margin:0 0 8px; font-size:14px; color:#cfd4e5; letter-spacing:0.3px; }
    @keyframes fadeUp { from { opacity:0; transform: translateY(8px);} to { opacity:1; transform: translateY(0);} }
    @media (max-width: 720px) {
      .panel-card { padding:16px; }
      table, thead, tbody, th, td, tr { display:block; }
      th { display:none; }
      td { border-bottom:1px solid rgba(255,255,255,0.05); padding:8px 0; }
      .table-wrap { overflow:hidden; }
    }
  </style>
</head>
<body>
  <div class="admin-shell">
    <div class="panel-card">
      <div class="header-brand">
        <img src="img/logo/logo (2).jpg" alt="Ganchos Blistero">
        <div>
          <p class="brand-title">Panel de administración-Ganchos Blisteros</p>
          <p class="brand-sub">Pedidos, productos y stock en un solo lugar</p>
        </div>
      </div>
      <p>Ingresá la contreseña para ver y actualizar pedidos o productos.</p>      <div id="loginBlock">
        <div class="field-row">
          <input type="password" id="tokenInput" placeholder="Token admin">
          <button class="btn" id="loginBtn">Ingresar</button>
        </div>
      </div>
      <div id="panelBlock" class="hidden">
        <div class="field-row">
          <button class="btn" id="tabOrders">Pedidos</button>
          <button class="btn btn--ghost" id="tabProducts">Productos</button>
        </div>
        <div id="ordersSection">
        <div class="field-row">
          <input type="text" id="searchInput" placeholder="Buscar por email u orden">
          <select id="statusFilter">
            <option value="">Todos los estados</option>
            <option value="pending">Pendiente</option>
            <option value="approved">Pago aprobado</option>
            <option value="cancelled">Cancelado</option>
          </select>
          <button class="btn btn--ghost" id="refreshBtn">Refrescar</button>
          <span class="pill" id="summaryCount">0 pedidos</span>
          <div style="display:flex;align-items:center;gap:8px;">
            <button class="btn btn--ghost" id="prevPageBtn" type="button"><</button>
            <span class="pill" id="pageInfo">Pag 1</span>
            <button class="btn btn--ghost" id="nextPageBtn" type="button">></button>
          </div>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Orden</th>
                <th>Cliente</th>
                <th>Total</th>
                <th>Estado</th>
                <th>Items</th>
                <th>Notas</th>
              </tr>
            </thead>
            <tbody id="ordersBody"></tbody>
          </table>
        </div>
        <div class="charts">
          <div class="chart-box">
            <h3>Pedidos por estado</h3>
            <canvas id="statusChart" height="180"></canvas>
          </div>
          <div class="chart-box">
            <h3>Total diario</h3>
            <canvas id="dailyChart" height="180"></canvas>
          </div>
          <div class="chart-box">
            <h3>Productos mas elegidos</h3>
            <canvas id="topItemsChart" height="180"></canvas>
          </div>
        </div>
        </div><!-- /ordersSection -->
        <div id="productsSection" class="hidden">
          <div class="header-brand" style="margin-bottom:8px;">
            <img src="img/logo/logo (2).jpg" alt="Ganchos Blistero">
            <div>
              <h2 class="brand-title" style="margin:0;">Productos</h2>
              <p class="brand-sub">Carga centralizada con Cloudinary + Supabase</p>
            </div>
          </div>
          <p style="margin:0 0 16px; color:#aeb3c2;">Crear producto</p>
          <div class="panel-card" style="background:#0c0f14; border-color:rgba(255,255,255,0.08);">
            <div class="field-row">
              <input id="pName" type="text" placeholder="Nombre *">
              <input id="pPrice" type="number" placeholder="Precio *" min="0">
              <input id="pSize" type="text" placeholder="Medida (ej: 8 cm) *">
              <select id="pType">
                <option value="product">Producto</option>
                <option value="combo">Combo</option>
              </select>
            </div>
          <div class="field-row">
            <input id="pBadge" type="text" placeholder="Badge (opcional)">
            <input id="pDescription" type="text" placeholder="Descripcion corta (opcional)">
          </div>
          <div class="field-row">
            <input id="pWeight" type="number" min="0" step="1" placeholder="Peso (g)">
            <input id="pLength" type="number" min="0" step="0.1" placeholder="Largo (cm)">
            <input id="pWidth" type="number" min="0" step="0.1" placeholder="Ancho (cm)">
            <input id="pHeight" type="number" min="0" step="0.1" placeholder="Alto (cm)">
          </div>
          <div class="field-row">
            <input id="pImageUrl" type="text" placeholder="URL de imagen (opcional si subes archivo)">
            <input id="pImageFile" type="file" accept="image/*">
            <button class="btn" id="uploadImageBtn" type="button">Subir imagen</button>
            <span class="pill" id="uploadStatus" style="display:none;"></span>
            </div>
            <div class="field-row">
              <button class="btn" id="createProductBtn" type="button">Crear producto</button>
              <span class="pill" id="productMsg" style="display:none;"></span>
            </div>
            <div id="productList" class="table-wrap" style="margin-top:12px;"></div>
          </div>
        </div><!-- /productsSection -->
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="admin.js"></script>
</body>
</html>
